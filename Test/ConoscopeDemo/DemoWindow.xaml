<?xml version="1.0" encoding="utf-8"?>
<Window x:Class="ConoscopeDemo.DemoWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:ScottPlot="clr-namespace:ScottPlot.WPF;assembly=ScottPlot.WPF"
        mc:Ignorable="d"
        Title="Conoscope Demo Window" Height="850" Width="1300" Background="#FF2D2D30" Initialized="Window_Initialized">
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Top Button -->
        <Button x:Name="btnOpenFile" 
                Content="打开CVCIE文件" 
                Grid.Row="0" 
                Grid.Column="0" 
                Grid.ColumnSpan="2"
                Height="40" 
                Margin="0,0,0,10"
                FontSize="16"
                Click="BtnOpenFile_Click"/>

        <!-- Control Panel -->
        <StackPanel Grid.Row="1" 
                    Grid.Column="0" 
                    Grid.ColumnSpan="2"
                    Orientation="Horizontal"
                    HorizontalAlignment="Center"
                    Margin="0,0,0,10">
            <TextBlock Text="显示角度:" 
                       Foreground="White" 
                       VerticalAlignment="Center"
                       Margin="0,0,10,0"/>
            <ComboBox x:Name="cbDisplayAngle"
                      Width="100"
                      SelectedIndex="4"
                      SelectionChanged="CbDisplayAngle_SelectionChanged">
                <ComboBoxItem Content="0°" Tag="0"/>
                <ComboBoxItem Content="30°" Tag="30"/>
                <ComboBoxItem Content="60°" Tag="60"/>
                <ComboBoxItem Content="90°" Tag="90"/>
                <ComboBoxItem Content="120°" Tag="120"/>
                <ComboBoxItem Content="150°" Tag="150"/>
                <ComboBoxItem Content="180°" Tag="180"/>
            </ComboBox>

            <TextBlock Text="显示通道:" 
                       Foreground="White" 
                       VerticalAlignment="Center"
                       Margin="20,0,10,0"/>
            <ComboBox x:Name="cbDisplayChannel"
                      Width="100"
                      SelectedIndex="1"
                      SelectionChanged="CbDisplayChannel_SelectionChanged">
                <ComboBoxItem Content="X通道" Tag="X"/>
                <ComboBoxItem Content="Y通道" Tag="Y"/>
                <ComboBoxItem Content="Z通道" Tag="Z"/>
            </ComboBox>
            
            <TextBlock Text="R圆半径:" 
                       Foreground="White" 
                       VerticalAlignment="Center"
                       Margin="20,0,10,0"/>
            <ComboBox x:Name="cbDisplayRadius"
                      Width="100"
                      SelectedIndex="2"
                      SelectionChanged="CbDisplayRadius_SelectionChanged">
                <ComboBoxItem Content="0°" Tag="0"/>
                <ComboBoxItem Content="20°" Tag="20"/>
                <ComboBoxItem Content="40°" Tag="40"/>
                <ComboBoxItem Content="60°" Tag="60"/>
                <ComboBoxItem Content="80°" Tag="80"/>
            </ComboBox>
        </StackPanel>

        <!-- Image Display -->
        <Border Grid.Row="2" Grid.Column="0" 
                BorderBrush="#FF3F3F46" 
                BorderThickness="1" 
                Margin="0,0,5,0">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <TextBlock x:Name="tbImageTitle"
                           Text="伪彩色图像 (Jet)" 
                           Grid.Row="0"
                           Foreground="White" 
                           FontSize="14" 
                           Margin="5"
                           HorizontalAlignment="Center"/>
                <Image Grid.Row="1" x:Name="imgDisplay"   Stretch="Uniform" />

            </Grid>
        </Border>

        <!-- Chart Display -->
        <Border Grid.Row="2" Grid.Column="1" 
                BorderBrush="#FF3F3F46" 
                BorderThickness="1" 
                Margin="5,0,0,0">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <ScottPlot:WpfPlot x:Name="wpfPlotDiameterLine" 
                                   Grid.Row="0" 
                                   Margin="5,5,5,5" Grid.ColumnSpan="2"/>
                <ScottPlot:WpfPlot x:Name="wpfPlotRCircle" 
                                Grid.Row="1" 
                                Margin="5,5,5,5" Grid.ColumnSpan="2"/>
            </Grid>
        </Border>

        <!-- Export Buttons -->
        <StackPanel Grid.Row="3" 
                    Grid.Column="0" 
                    Grid.ColumnSpan="2" 
                    Orientation="Horizontal" 
                    HorizontalAlignment="Center"
                    Margin="0,10,0,0">
            <Button x:Name="btnExportDiameter" 
                    Content="导出直径线CSV (0°-180°)" 
                    Width="180" 
                    Height="35"
                    Margin="0,0,10,0"
                    Click="BtnExportDiameter_Click"
                   />
            <Button x:Name="btnExportCircle" 
                    Content="导出R圆CSV" 
                    Width="150" 
                    Height="35"
                    Click="BtnExportCircle_Click"
                    />
        </StackPanel>
    </Grid>
</Window>
