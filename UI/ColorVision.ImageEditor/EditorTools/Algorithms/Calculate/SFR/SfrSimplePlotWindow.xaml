<Window x:Class="ColorVision.ImageEditor.EditorTools.Algorithms.Calculate.SFR.SfrSimplePlotWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:ColorVision.ImageEditor.EditorTools.Algorithms.Calculate.SFR"
        Title="SFR Plot" Height="700" Width="1000">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>
        
        <!-- Right Panel -->
        <Border Grid.Column="1" Width="320" Margin="8" Background="#FAFAFA" BorderBrush="#E0E0E0" BorderThickness="1" CornerRadius="4">
            <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="12">
                <StackPanel>
                    <!-- SFR Information Section -->
                    <Border Background="#2196F3" CornerRadius="4" Padding="8" Margin="0,0,0,12">
                        <TextBlock Text="SFR Information" FontSize="14" FontWeight="Bold" Foreground="White"/>
                    </Border>
                    
                    <Grid Margin="0,0,0,4">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="100"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="MTF50 (norm):" VerticalAlignment="Center" FontWeight="SemiBold"/>
                        <TextBox x:Name="TxtMtf50Norm" Grid.Column="1" IsReadOnly="True" BorderThickness="0" Background="Transparent" FontWeight="Bold" Foreground="#1976D2"/>
                    </Grid>
                    
                    <Grid Margin="0,0,0,4">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="100"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="MTF50 (cy/pix):" VerticalAlignment="Center" FontWeight="SemiBold"/>
                        <TextBox x:Name="TxtMtf50CyPix" Grid.Column="1" IsReadOnly="True" BorderThickness="0" Background="Transparent" FontWeight="Bold" Foreground="#1976D2"/>
                    </Grid>
                    
                    <Grid Margin="0,0,0,4">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="100"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="MTF10 (norm):" VerticalAlignment="Center"/>
                        <TextBox x:Name="TxtMtf10Norm" Grid.Column="1" IsReadOnly="True" BorderThickness="0" Background="Transparent"/>
                    </Grid>
                    
                    <Grid Margin="0,0,0,8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="100"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="MTF10 (cy/pix):" VerticalAlignment="Center"/>
                        <TextBox x:Name="TxtMtf10CyPix" Grid.Column="1" IsReadOnly="True" BorderThickness="0" Background="Transparent"/>
                    </Grid>

                    <!-- Query Channel Section (only visible for multi-channel) -->
                    <StackPanel x:Name="PnlQueryChannel" Visibility="Collapsed">
                        <Separator Margin="0,8,0,12"/>
                        <TextBlock Text="查询通道" FontSize="12" FontWeight="Bold" Margin="0,0,0,6"/>
                        <ComboBox x:Name="CmbQueryChannel" Margin="0,0,0,0" SelectionChanged="CmbQueryChannel_SelectionChanged">
                            <ComboBoxItem Content="L (Luminance)" IsSelected="True"/>
                            <ComboBoxItem Content="R (Red)"/>
                            <ComboBoxItem Content="G (Green)"/>
                            <ComboBoxItem Content="B (Blue)"/>
                        </ComboBox>
                    </StackPanel>

                    <Separator Margin="0,12,0,12"/>

                    <!-- Query Section -->
                    <TextBlock Text="数据查询" FontSize="12" FontWeight="Bold" Margin="0,0,0,8"/>
                    
                    <Grid Margin="0,0,0,6">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="50"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="频率:" VerticalAlignment="Center"/>
                        <TextBox x:Name="TxtFreq" Grid.Column="1" Text="0.5" Margin="0,0,6,0"/>
                        <Button Grid.Column="2" Content="MTF@Freq" Width="80" Click="BtnMtfAtFreq_Click"/>
                    </Grid>
                    
                    <Grid Margin="0,0,0,6">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="50"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="MTF:" VerticalAlignment="Center"/>
                        <TextBox x:Name="TxtMtf" Grid.Column="1" Text="0.5" Margin="0,0,6,0"/>
                        <Button Grid.Column="2" Content="Freq@MTF" Width="80" Click="BtnFreqAtMtf_Click"/>
                    </Grid>

                    <Border Background="#E3F2FD" CornerRadius="4" Padding="8" Margin="0,4,0,0" MinHeight="32">
                        <TextBlock x:Name="TxtResult" TextWrapping="Wrap" Foreground="#1565C0"/>
                    </Border>

                    <!-- Channel Visibility Section (only visible for multi-channel) -->
                    <StackPanel x:Name="PnlChannelVisibility" Visibility="Collapsed">
                        <Separator Margin="0,12,0,12"/>
                        <TextBlock x:Name="TxtChannelVisibility" Text="通道显示" FontSize="12" FontWeight="Bold" Margin="0,0,0,8"/>
                        
                        <WrapPanel>
                            <CheckBox x:Name="ChkShowR" Content="R" IsChecked="True" Margin="0,0,12,4" Checked="ChkChannel_Changed" Unchecked="ChkChannel_Changed" Foreground="#FF0000" FontWeight="Bold"/>
                            <CheckBox x:Name="ChkShowG" Content="G" IsChecked="True" Margin="0,0,12,4" Checked="ChkChannel_Changed" Unchecked="ChkChannel_Changed" Foreground="#00AA00" FontWeight="Bold"/>
                            <CheckBox x:Name="ChkShowB" Content="B" IsChecked="True" Margin="0,0,12,4" Checked="ChkChannel_Changed" Unchecked="ChkChannel_Changed" Foreground="#0000FF" FontWeight="Bold"/>
                            <CheckBox x:Name="ChkShowL" Content="L" IsChecked="True" Margin="0,0,0,4" Checked="ChkChannel_Changed" Unchecked="ChkChannel_Changed" Foreground="#000000" FontWeight="Bold"/>
                        </WrapPanel>
                    </StackPanel>

                    <Separator Margin="0,12,0,12"/>

                    <Button Content="导出到 CSV" Height="32" Click="BtnExportCsv_Click" FontWeight="Bold"/>
                </StackPanel>
            </ScrollViewer>
        </Border>

        <local:SfrSimplePlotControl x:Name="Plot" Margin="8"/>
    </Grid>
</Window>
